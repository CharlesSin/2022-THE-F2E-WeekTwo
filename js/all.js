document.querySelectorAll("#modal-save-btn")[0].classList.add("custom-hide"),document.querySelector("#modalprevTab").addEventListener("click",function(){var e=document.querySelectorAll("[aria-label='Pagination']")[0],t=document.querySelectorAll("#modal-save-btn")[0],l=document.querySelectorAll(".step-tab.first")[0],o=document.querySelectorAll(".step-tab.second")[0],n=document.querySelectorAll("#steps-uid-0-p-0")[0],a=document.querySelectorAll("#steps-uid-0-p-1")[0];e.querySelector(".prev").classList.add("custom-hide"),e.querySelector(".next").classList.remove("custom-hide"),l.classList.add("current"),l.classList.remove("done"),o.classList.remove("current"),o.classList.add("done"),n.classList.remove("custom-hide"),n.classList.add("current"),a.classList.add("custom-hide"),a.classList.remove("current"),t.classList.add("custom-hide")}),document.querySelector("#modalnextTab").addEventListener("click",function(){var e=document.querySelectorAll("[aria-label='Pagination']")[0],t=document.querySelectorAll("#modal-save-btn")[0],l=document.querySelectorAll(".step-tab.first")[0],o=document.querySelectorAll(".step-tab.second")[0],n=document.querySelectorAll("#steps-uid-0-p-0")[0],a=document.querySelectorAll("#steps-uid-0-p-1")[0];e.querySelector(".prev").classList.remove("custom-hide"),e.querySelector(".next").classList.add("custom-hide"),l.classList.add("done"),l.classList.remove("current"),o.classList.add("current"),o.classList.remove("done"),n.classList.remove("current"),n.classList.add("custom-hide"),a.classList.remove("custom-hide"),a.classList.add("current"),t.classList.remove("custom-hide")});let isAdvancedUpload=function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window}(),draggableFileArea=document.querySelector(".drag-file-area"),browseFileText=document.querySelector(".browse-files"),uploadIcon=document.querySelector(".upload-icon"),dragDropText=document.querySelector(".dynamic-message"),fileInput=document.querySelector(".default-file-input"),cannotUploadMessage=document.querySelector(".cannot-upload-message"),cancelAlertButton=document.querySelector(".cancel-alert-button"),uploadedFile=document.querySelector(".file-block"),fileName=document.querySelector(".file-name"),fileSize=document.querySelector(".file-size"),progressBar=document.querySelector(".progress-bar"),removeFileButton=document.querySelector(".remove-file-icon"),uploadButton=document.querySelector(".upload-button"),fileFlag=0,overflowWidth=.25*document.querySelector(".upload-files-container").offsetWidth,progressBarMaxWidth=document.querySelector(".upload-files-container").offsetWidth-overflowWidth;function downloadPDFfile(e){var t=localStorage.getItem(e),l=new jsPDF,o=l.internal.pageSize.width,n=l.internal.pageSize.height;l.addImage(t,"png",0,0,o,n),l.save(e+".pdf")}function bookmark(e){var t=document.querySelectorAll(`#${e} span`),e=`${e}@${t[0].textContent}@`+t[1].textContent;let l=localStorage.getItem("favoritelist")||"";l.includes(e)||(l+=0<l.length?","+e:e,localStorage.setItem("favoritelist",l)),favoritelistInit()}function removePDF(e){var t=document.querySelectorAll(`#${e} > span`),l=`${e}@${t[0].textContent}@`+t[1].textContent;let o=localStorage.getItem("trashlist")||"",n=(o.includes(l)||(o+=0<o.length?","+l:l,localStorage.setItem("trashlist",o)),`${e}@${e.split("_")[1]}@`+t[1].textContent);l=localStorage.getItem("localpdf").split(",").filter(e=>e!==n);localStorage.setItem("localpdf",l),pdfListInit(),trashlistInit()}function removeBookmark(e){var t=document.querySelectorAll(`#${e} > span`),l=`${e}@${t[0].textContent}@`+t[1].textContent;let o=localStorage.getItem("trashlist")||"",n=(o.includes(l)||(o+=0<o.length?","+l:l,localStorage.setItem("trashlist",o)),`${e}@${t[0].textContent}@`+t[1].textContent);l=localStorage.getItem("favoritelist").split(",").filter(e=>e!==n);localStorage.setItem("favoritelist",l),pdfListInit(),favoritelistInit()}function recoverPDFfile(e){var t=document.querySelectorAll(`#${e} > span`),l=`${e}@${e.split("_")[1]}@`+t[1].textContent;let o=localStorage.getItem("localpdf")||"",n=(o.includes(l)||(o+=0<o.length?","+l:l,localStorage.setItem("localpdf",o)),`${e}@${t[0].textContent}@`+t[1].textContent);l=localStorage.getItem("trashlist").split(",").filter(e=>e!==n);localStorage.setItem("trashlist",l),pdfListInit(),trashlistInit()}function removeLocalPDF(e){var t=document.querySelectorAll(`#${e} > span`);let l=`${e}@${t[0].textContent}@`+t[1].textContent;e=localStorage.getItem("trashlist").split(",").filter(e=>e!==l);localStorage.setItem("trashlist",e),trashlistInit()}function pdfListInit(){var e=(localStorage.getItem("localpdf")||"").split(",");let o="";(document.querySelector("#pdf-list").innerHTML="")!==e[0]&&(e.forEach(e=>{var[e,t,l]=e.split("@"),t=new Date(parseInt(t));o+=`
          <li class="row m-0 px-2 py-1 mb-1 d-flex justify-content-center align-items-center custom-dark-shadow-sm custom-rounded-20" id="${e}"><i class="col-md-1 col-sm-2 col-2 p-0 ft-paperclip text-center font-medium-3"></i><span class="col-md-3 col-sm-10 col-10 p-0 font-medium-2">${t.getDate()}-${t.getMonth()+1}-${t.getFullYear()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}</span><span class="col-md-3 col-sm-10 col-12 p-0 font-medium-2">${l}</span><div class="col-md-5 col-sm-12 p-0 d-flex justify-content-end" style="gap: 10px;"><a href="javascript:void(0)" class="btn btn-outline-primary" onclick="downloadPDFfile('${e}')"><i class="ft-download font-medium-3"></i></a><a href="javascript:void(0)" class="btn btn-outline-success" onclick="bookmark('${e}')"><i class="ft-bookmark font-medium-3"></i></a><a href="javascript:void(0)" class="btn btn-outline-danger removePDF" id="${e}" onclick="removePDF('${e}')"><i class="ft-trash font-medium-3"></i></a></div></li>`}),document.querySelector("#pdf-list").innerHTML="",document.querySelector("#pdf-list").innerHTML=o)}function favoritelistInit(){var e=(localStorage.getItem("favoritelist")||"").split(",");if((document.querySelector("#favorite-list").innerHTML="")!==e[0]){let o="";e.forEach(e=>{var[e,t,l]=e.split("@");o+=`
        <li class="row m-0 px-2 py-1 mb-1 d-flex justify-content-center align-items-center custom-dark-shadow-sm custom-rounded-20" id='${e}'>
            <i class="col-md-1 col-sm-2 col-2 p-0 ft-paperclip text-center font-medium-3"></i>
            <span class="col-md-3 col-sm-10 col-10 p-0 font-medium-2">${t}</span>
            <span class="col-md-3 col-sm-10 col-12 p-0 font-medium-2">${l}</span>
            <div class="col-md-5 col-sm-12 p-0 d-flex justify-content-end" style="gap: 10px;">
            <a href="javascript:void(0)" class="btn btn-warning" onclick="removeBookmark('${e}')"><i class="ft-heart font-medium-3"></i></a>
            </div>
        </li>`}),document.querySelector("#favorite-list").innerHTML="",document.querySelector("#favorite-list").innerHTML=o}}function trashlistInit(){var e=(localStorage.getItem("trashlist")||"").split(",");let o="";(document.querySelector("#trash-list").innerHTML="")!==e[0]&&(e.forEach(e=>{var[e,t,l]=e.split("@");o+=`
        <li class="row m-0 px-2 py-1 mb-1 d-flex justify-content-center align-items-center custom-dark-shadow-sm custom-rounded-20" id='${e}'>
            <i class="col-md-1 col-sm-2 col-2 p-0 ft-paperclip text-center font-medium-3"></i>
            <span class="col-md-3 col-sm-10 col-10 p-0 font-medium-2">${t}</span>
            <span class="col-md-3 col-sm-10 col-12 p-0 font-medium-2">${l}</span>
            <div class="col-md-5 col-sm-12 p-0 d-flex justify-content-end" style="gap: 10px;">
            <a href="#" class="btn btn-outline-success" onclick="recoverPDFfile('${e}')"><i class="ft-rotate-cw font-medium-3"></i></a>
            <a href="#" class="btn btn-outline-danger" onclick="removeLocalPDF('${e}')"><i class="ft-trash font-medium-3"></i></a>
            </div>
        </li>`}),document.querySelector("#trash-list").innerHTML="",document.querySelector("#trash-list").innerHTML=o)}fileInput.addEventListener("click",function(){fileInput.value=""}),fileInput.addEventListener("change",function(e){var t=0<=fileInput.value.indexOf("\\")?fileInput.value.lastIndexOf("\\"):fileInput.value.lastIndexOf("/");let l=fileInput.value.substring(t);0!==l.indexOf("\\")&&0!==l.indexOf("/")||(l=l.substring(1)),uploadIcon.innerHTML="確認文件：",dragDropText.innerHTML=""+l,localStorage.setItem("filename",l),document.querySelector(".label").innerHTML=`將檔案拖曳到這裡 或者 
          <span class="browse-files" >
            <input type="file" class="default-file-input" accept=".pdf" />
            <span class="browse-files-text" style="top: 0;" > 預覽 </span>
          </span>`,uploadButton.innerHTML="上傳",fileName.innerHTML=fileInput.files[0].name,fileSize.innerHTML=(fileInput.files[0].size/1024).toFixed(1)+" KB",uploadedFile.style.cssText="display: flex;",progressBar.style.width=0,fileFlag=0}),uploadButton.addEventListener("click",function(){var e,t,l=fileInput.value;removeFileButton.classList.add("custom-hide");let o=document.querySelectorAll("[aria-label='Pagination']")[0];""!=l?0==fileFlag&&(fileFlag=1,e=0,t=setInterval(function(){e>=progressBarMaxWidth?(clearInterval(t),uploadButton.innerHTML='<span class="material-icons-outlined upload-button-icon"> 成功 </span> 上傳',o.querySelector(".next").classList.remove("custom-hide")):(e+=10,progressBar.style.width=e+"px")},50)):cannotUploadMessage.style.cssText="display: flex; animation: fadeIn linear 1.5s;"}),cancelAlertButton.addEventListener("click",function(){cannotUploadMessage.style.cssText="display: none;"}),isAdvancedUpload&&(["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(e=>draggableFileArea.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()})),["dragover","dragenter"].forEach(function(e){draggableFileArea.addEventListener(e,e=>{e.preventDefault(),e.stopPropagation(),uploadIcon.innerHTML="file_download",dragDropText.innerHTML="Drop your file here!"})}),draggableFileArea.addEventListener("drop",function(e){uploadIcon.innerHTML="成功",dragDropText.innerHTML="檔案拖曳成功！",document.querySelector(".label").innerHTML='將檔案拖曳到這裡 或者 <span class="browse-files" > <input type="file" class="default-file-input" accept=".pdf" /> <span class="browse-files-text" style="top: -23px; left: -20px;" > 預覽 </span> </span>',uploadButton.innerHTML="上傳";e=e.dataTransfer.files;fileInput.files=e,fileName.innerHTML=e[0].name,fileSize.innerHTML=(e[0].size/1024).toFixed(1)+" KB",uploadedFile.style.cssText="display: flex;",progressBar.style.width=0,fileFlag=0})),removeFileButton.addEventListener("click",function(){uploadedFile.style.cssText="display: none;",fileInput.value="",uploadIcon.innerHTML="上傳文件",dragDropText.innerHTML="將檔案拖曳到這裡",document.querySelector(".label").innerHTML=`<span class="browse-files">
          <input type="file" class="default-file-input" accept=".pdf" />
          <span class="browse-files-text"> 瀏覽 </span>
          <span> 本地文件 </span>
        </span>`,uploadButton.innerHTML="上傳"}),pdfListInit(),favoritelistInit(),trashlistInit();